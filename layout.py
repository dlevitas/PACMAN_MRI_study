import pygame
import random
from config import *
import numpy as np


def enviroment_setup(rand_num, num_dots):
    """Determines which grid is used for the trial as well as the player, ghosts,
    and dots locations. Since there are a variety of options to choose from, this
    information is randomized when a new trial is initialized."""
    
    # generate random seed
    random.seed(rand_num)

    grid_options = []

    gridA = {"grid":   ((0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
                        (0,3,1,1,4,1,1,1,4,1,1,1,1,1,1,4,1,1,1,4,1,1,3,0),
                        (0,2,0,0,2,0,0,0,2,0,0,0,0,0,0,2,0,0,0,2,0,0,2,0),
                        (0,2,0,0,2,0,0,0,2,0,0,0,0,0,0,2,0,0,0,2,0,0,2,0),
                        (0,2,0,0,2,0,0,0,2,0,0,0,0,0,0,2,0,0,0,2,0,0,2,0),
                        (0,2,0,0,2,0,0,0,2,0,0,0,0,0,0,2,0,0,0,2,0,0,2,0),
                        (0,4,1,1,4,1,1,1,5,1,1,1,1,1,1,5,1,1,1,4,1,1,4,0),
                        (0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,2,0),
                        (0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,2,0),
                        (0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,2,0),
                        (0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,2,0),
                        (0,4,1,1,4,1,1,1,5,1,1,1,1,1,1,5,1,1,1,4,1,1,4,0),
                        (0,2,0,0,2,0,0,0,2,0,0,0,0,0,0,2,0,0,0,2,0,0,2,0),
                        (0,2,0,0,2,0,0,0,2,0,0,0,0,0,0,2,0,0,0,2,0,0,2,0),
                        (0,2,0,0,2,0,0,0,2,0,0,0,0,0,0,4,1,1,1,4,0,0,2,0),
                        (0,2,0,0,2,0,0,0,2,0,0,0,0,0,0,2,0,0,0,2,0,0,2,0),
                        (0,3,1,1,4,1,1,1,4,1,1,1,1,1,1,4,1,1,1,4,1,1,3,0),
                        (0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),
             "id": "A",
             "player_start_pos": [(36, 36), (36, 576), (792, 36), (792, 576)],
             "ghosts_start_pos": [(288, 216), (540, 216), (288, 396), (540, 396)]
             }

    gridB = {"grid":   ((0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
                        (0,3,1,1,1,3,0,0,0,0,3,1,1,1,1,1,1,4,1,1,1,1,3,0),
                        (0,2,0,0,0,2,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,2,0),
                        (0,2,0,0,0,4,1,1,1,1,4,0,0,0,0,0,0,2,0,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,2,0),
                        (0,4,1,1,1,4,1,1,1,1,5,1,1,1,4,1,1,4,1,1,1,1,4,0),
                        (0,2,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,2,0),
                        (0,2,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,2,0),
                        (0,2,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,2,0),
                        (0,2,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,2,0),
                        (0,4,1,1,1,1,1,4,1,1,5,1,1,1,4,1,1,1,4,1,1,1,3,0),
                        (0,2,0,0,0,0,0,2,0,0,2,0,0,0,0,0,0,0,2,0,0,0,0,0),
                        (0,2,0,0,0,0,0,2,0,0,2,0,0,0,0,0,0,0,2,0,0,0,0,0),
                        (0,4,1,1,1,1,1,3,0,0,4,1,1,1,1,1,1,1,5,1,1,1,3,0),
                        (0,2,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,2,0),
                        (0,3,1,1,1,1,1,1,1,1,4,1,1,1,1,1,1,1,4,1,1,1,3,0),
                        (0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),
            "id": "B",
            "player_start_pos": [(36, 36), (36, 576), (792, 36), (792, 576)],
            "ghosts_start_pos": [(360, 180), (360, 360), (648, 468)]
            }
    
    gridC = {"grid":   ((0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
                        (0,3,1,1,1,1,1,1,1,4,1,1,1,1,1,1,1,1,4,1,1,1,3,0),
                        (0,2,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,2,0),
                        (0,4,1,1,1,1,1,1,1,5,1,1,1,4,1,1,1,1,5,1,1,1,4,0),
                        (0,2,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0),
                        (0,4,1,1,1,4,1,1,1,5,1,1,1,5,1,1,1,1,5,1,1,1,4,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,4,1,1,1,1,4,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0),
                        (0,3,1,1,1,4,1,1,1,4,1,1,1,4,1,1,1,1,4,1,1,1,3,0),
                        (0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),
            "id": "C",
            "player_start_pos": [(36, 36), (36, 576), (792, 36), (792, 576)],
            "ghosts_start_pos": [(324, 180), (648, 180), (324, 324), (468, 324), (648, 324)]
            }
    
    gridD = {"grid":   ((0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
                        (0,3,1,1,1,4,1,1,1,4,1,1,1,1,4,1,1,1,4,1,1,1,3,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0),
                        (0,4,1,1,1,5,1,1,1,5,1,1,1,1,4,0,0,0,4,1,1,1,4,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,4,1,1,1,1,5,1,1,1,4,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0),
                        (0,4,1,1,1,4,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,4,1,1,1,1,4,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0),
                        (0,3,1,1,1,4,1,1,1,4,1,1,1,1,4,1,1,1,4,1,1,1,3,0),
                        (0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),
             "id": "D",
             "player_start_pos": [(36, 36), (36, 576), (792, 36), (792, 576)],
             "ghosts_start_pos": [(180, 180), (324, 180), (504, 324)]
             }
    
    gridE = {"grid":   ((0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
                        (0,3,1,1,1,4,1,1,1,4,1,1,1,1,1,4,1,1,1,1,1,1,3,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,0,2,0),
                        (0,4,1,1,1,5,1,1,1,5,1,1,1,1,1,5,1,1,1,1,1,1,4,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,0,2,0),
                        (0,4,1,1,1,4,1,1,1,5,1,1,1,4,1,4,1,1,4,1,1,1,4,0),
                        (0,2,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0),
                        (0,4,1,1,1,1,1,1,1,4,0,0,0,2,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0),
                        (0,3,1,1,1,1,1,1,1,4,1,1,1,4,1,1,1,1,4,1,1,1,3,0),
                        (0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),
            "id": "E",
            "player_start_pos": [(36, 36), (36, 576), (792, 36), (792, 576)],
            "ghosts_start_pos": [(180, 180), (324, 180), (540, 180), (324, 324)]
            }
    
    gridF = {"grid":   ((0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
                        (0,3,1,1,1,1,4,1,1,1,1,4,1,1,1,1,4,1,1,1,1,1,3,0),
                        (0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,2,0),
                        (0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,2,0),
                        (0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,2,0),
                        (0,4,1,1,1,1,5,1,1,1,1,5,1,1,1,1,5,1,1,1,1,1,4,0),
                        (0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,2,0),
                        (0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,2,0),
                        (0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,2,0),
                        (0,4,1,1,1,1,5,1,1,1,1,5,1,1,1,1,5,1,1,1,1,1,4,0),
                        (0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,2,0),
                        (0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,2,0),
                        (0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,2,0),
                        (0,4,1,1,1,1,4,0,0,0,0,2,0,0,0,0,3,1,1,1,1,1,4,0),
                        (0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,2,0),
                        (0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,2,0),
                        (0,3,1,1,1,1,4,1,1,1,1,4,1,1,1,1,1,1,1,1,1,1,3,0),
                        (0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),
            "id": "F",
            "player_start_pos": [(36, 36), (36, 576), (792, 36), (792, 576)],
            "ghosts_start_pos": [(216, 180), (396, 180), (576, 180), (216, 324), (396, 324), (576, 324)]
            }
    
    gridG = {"grid":   ((0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
                        (0,3,1,1,1,1,1,1,1,1,4,1,1,1,1,1,1,1,4,1,1,1,3,0),
                        (0,2,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,2,0),
                        (0,4,1,1,1,1,3,0,0,0,2,0,0,0,3,1,1,1,5,1,1,1,4,0),
                        (0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0),
                        (0,4,1,1,1,1,5,1,1,1,5,1,1,1,5,1,1,1,5,1,1,1,4,0),
                        (0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0),
                        (0,4,1,1,1,1,4,0,0,0,2,0,0,0,3,1,1,1,5,1,1,1,4,0),
                        (0,2,0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,2,0),
                        (0,3,1,1,1,1,4,1,1,1,4,1,1,1,1,1,1,1,4,1,1,1,3,0),
                        (0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),
            "id": "G",
            "player_start_pos": [(36, 36), (36, 576), (792, 36), (792, 576)],
            "ghosts_start_pos": [(648, 180), (216, 324), (360, 324), (504, 324), (648, 324), (648, 432)]
            }
    
    gridH = {"grid":   ((0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
                        (0,3,1,1,1,3,0,0,0,0,3,1,1,1,3,0,0,0,3,1,1,1,3,0),
                        (0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0),
                        (0,4,1,1,1,5,1,1,1,1,5,1,1,1,5,1,1,1,5,1,1,1,3,0),
                        (0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,0),
                        (0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,0),
                        (0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,0),
                        (0,4,1,1,1,5,1,1,1,1,5,1,1,1,5,1,1,1,4,0,0,0,0,0),
                        (0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,0),
                        (0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,0),
                        (0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,0),
                        (0,4,1,1,1,4,0,0,0,0,4,1,1,1,5,1,1,1,5,1,1,1,3,0),
                        (0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0),
                        (0,3,1,1,1,4,1,1,1,1,4,1,1,1,4,1,1,1,4,1,1,1,3,0),
                        (0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),
            "id": "H",
            "player_start_pos": [(36, 36), (36, 576), (792, 36), (792, 576)],
            "ghosts_start_pos": [(180, 180), (360, 180), (504, 180), (648, 180), (180, 324), (360, 324), (504, 324), (504, 468), (648, 468)]
            }
    
    gridI = {"grid":   ((0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
                        (0,3,1,1,1,3,0,0,0,0,0,0,0,3,1,1,1,4,1,1,1,1,3,0),
                        (0,2,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0,2,0),
                        (0,4,1,1,1,5,1,1,1,4,1,1,1,5,1,1,1,5,1,1,1,1,4,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,2,0),
                        (0,2,0,0,0,4,1,1,1,5,1,1,1,5,1,1,1,5,1,1,1,1,4,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,2,0),
                        (0,4,1,1,1,5,1,1,1,4,1,4,1,4,1,1,1,5,1,1,1,1,4,0),
                        (0,2,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,2,0),
                        (0,3,1,1,1,4,1,1,1,1,1,3,0,0,0,0,0,3,1,1,1,1,3,0),
                        (0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),
            "id": "I",
            "player_start_pos": [(36, 36), (36, 576), (792, 36), (792, 576)],
            "ghosts_start_pos": [(180, 180), (468, 180), (612, 180), (324, 324), (468, 324), (612, 324), (180, 432), (612, 432)]
            }
        
    gridJ = {"grid":   ((0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
                        (0,3,1,1,1,4,1,1,1,1,1,1,1,4,1,1,1,1,4,1,1,1,3,0),
                        (0,2,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,4,1,1,1,1,4,1,1,5,1,1,1,1,5,1,1,1,3,0),
                        (0,2,0,0,0,2,0,0,0,0,2,0,0,2,0,0,0,0,2,0,0,0,0,0),
                        (0,2,0,0,0,2,0,0,0,0,2,0,0,2,0,0,0,0,2,0,0,0,0,0),
                        (0,2,0,0,0,2,0,0,0,0,2,0,0,2,0,0,0,0,4,1,1,1,3,0),
                        (0,3,1,1,1,4,0,0,0,0,4,1,1,4,0,0,0,0,2,0,0,0,2,0),
                        (0,0,0,0,0,2,0,0,0,0,2,0,0,2,0,0,0,0,2,0,0,0,2,0),
                        (0,0,0,0,0,2,0,0,0,0,2,0,0,2,0,0,0,0,2,0,0,0,2,0),
                        (0,3,1,1,1,5,1,1,1,1,5,1,1,4,1,1,1,1,5,1,1,1,4,0),
                        (0,2,0,0,0,2,0,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,2,0),
                        (0,2,0,0,0,2,0,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,2,0),
                        (0,3,1,1,1,4,1,1,1,1,4,1,1,1,1,1,1,1,4,1,1,1,3,0),
                        (0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),
            "id": "J",
            "player_start_pos": [(36, 36), (36, 576), (792, 36), (792, 576)],
            "ghosts_start_pos": [(468, 180), (648, 180), (180, 432), (360, 432), (648, 432)]
            }
            
            
    

    # combine grid options
    grid_options.append([gridA, gridB, gridC, gridD, gridE, gridF, gridG, gridH, gridI, gridJ])
    grid_options = [x for y in grid_options for x in y] # flatten list of dics

    # randomly select a grid option
    grid_data = random.choice(grid_options)

    # grid
    grid = grid_data["grid"]

    # grid ID
    grid_id = grid_data["id"]

    # randomly select player start position
    player_start_pos = random.choice(grid_data["player_start_pos"])

    # randomly select ghosts start positions
    slime1_start_pos = random.choice(grid_data["ghosts_start_pos"])
    slime2_start_pos = random.choice([x for x in grid_data["ghosts_start_pos"] if x != slime1_start_pos])
    slimes_start_pos = [slime1_start_pos, slime2_start_pos]

    # get all intersections (2-way, 3-way, 4-way) and horizontal and vertical
    horizontal = []
    vertical = []
    intersection_2way = []
    intersection_3way = []
    intersection_4way = []

    for i, row in enumerate(grid):
        for j, item in enumerate(row):
            if item == 1:
                pos_type = "horizontal"
                upVal, downVal, leftVal, rightVal = 0, 0, 1, 1
                legal_directions = ["left", "right"]
                horizontal.append(((j*36, i*36), [upVal, downVal, leftVal, rightVal], legal_directions, pos_type))

            elif item == 2:
                pos_type = "vertical"
                upVal, downVal, leftVal, rightVal = 2, 2, 0, 0
                legal_directions = ["up", "down"]
                vertical.append(((j*36, i*36), [upVal, downVal, leftVal, rightVal], legal_directions, pos_type))

            elif item in [3, 4, 5]:
                legal_directions = []
                upVal = grid[i-1][j]
                downVal = grid[i+1][j]
                leftVal = grid[i][j-1]
                rightVal = grid[i][j+1]

                if upVal != 0:
                    legal_directions.append("up")
                if downVal != 0:
                    legal_directions.append("down")
                if leftVal != 0:
                    legal_directions.append("left")
                if rightVal != 0:
                    legal_directions.append("right")

                if item == 3:
                    pos_type = "2way"
                    intersection_2way.append(((j*36, i*36), [upVal, downVal, leftVal, rightVal], legal_directions, pos_type))
                elif item == 4:
                    pos_type = "3way"
                    intersection_3way.append(((j*36, i*36), [upVal, downVal, leftVal, rightVal], legal_directions, pos_type))
                elif item == 5:
                    pos_type = "4way"
                    intersection_4way.append(((j*36, i*36), [upVal, downVal, leftVal, rightVal], legal_directions, pos_type))

    dots_pos = [x[0] for x in intersection_2way+intersection_3way+intersection_4way if x[0] != player_start_pos]
    dots_pos = random.sample(dots_pos, num_dots)
    random.shuffle(dots_pos)
    dot_order_indices = [index+1 for index,value in enumerate(dots_pos)]
    dots_info = list(zip(dots_pos, dot_order_indices))

    return grid, player_start_pos, slimes_start_pos, dots_info, grid_id, horizontal, vertical, intersection_2way, intersection_3way, intersection_4way


def draw_enviroment(screen, grid):
    """Creates the grid."""
    
    for i, row in enumerate(grid):
        for j, item in enumerate(row):
            if item == 1:
                pygame.draw.line(screen, BLUE , [j*36, i*36], [j*36+36, i*36], 3) # line drawn left
                pygame.draw.line(screen, BLUE , [j*36, i*36+36], [j*36+36, i*36+36], 3) # line drawn right
            elif item == 2:
                pygame.draw.line(screen, BLUE , [j*36, i*36], [j*36, i*36+36], 3) # line drawn up
                pygame.draw.line(screen, BLUE , [j*36+36, i*36], [j*36+36, i*36+36], 3) # line drawn down
            elif item in [3, 4]:
                upVal = grid[i-1][j]
                downVal = grid[i+1][j]
                leftVal = grid[i][j-1]
                rightVal = grid[i][j+1]

                # 2-way intersection
                if [upVal, downVal, leftVal, rightVal] == [0, 2, 0, 1]: # down<-->right
                    pygame.draw.line(screen, BLUE , [j*36, i*36], [j*36+36, i*36], 3)
                    pygame.draw.line(screen, BLUE , [j*36, i*36], [j*36, i*36+36], 3)
                elif [upVal, downVal, leftVal, rightVal] == [2, 0, 0, 1]: # up<-->right
                    pygame.draw.line(screen, BLUE , [j*36, i*36+36], [j*36+36, i*36+36], 3)
                    pygame.draw.line(screen, BLUE , [j*36, i*36], [j*36, i*36+36], 3)
                elif [upVal, downVal, leftVal, rightVal] == [0, 2, 1, 0]: # down<-->left
                    pygame.draw.line(screen, BLUE , [j*36, i*36], [j*36+36, i*36], 3)
                    pygame.draw.line(screen,BLUE ,[j*36+36,i*36],[j*36+36,i*36+36],3)
                elif [upVal,downVal,leftVal,rightVal] == [2,0,1,0]: # up<-->left
                    pygame.draw.line(screen,BLUE ,[j*36,i*36+36],[j*36+36,i*36+36],3)
                    pygame.draw.line(screen,BLUE ,[j*36+36,i*36],[j*36+36,i*36+36],3)

                # 3-way intersection
                elif [upVal,downVal,leftVal,rightVal] == [2,2,0,1]: # up<-->down<-->right
                    pygame.draw.line(screen,BLUE ,[j*36,i*36],[j*36,i*36+36],3)
                elif [upVal,downVal,leftVal,rightVal] == [0,2,1,1]: # down<-->left<-->right
                    pygame.draw.line(screen,BLUE ,[j*36,i*36],[j*36+36,i*36],3)
                elif [upVal,downVal,leftVal,rightVal] == [2,2,1,0]: # up<-->down<-->left
                    pygame.draw.line(screen,BLUE ,[j*36+36,i*36],[j*36+36,i*36+36],3)
                elif [upVal,downVal,leftVal,rightVal] == [2,0,1,1]: # up<-->left<-->right
                    pygame.draw.line(screen,BLUE ,[j*36,i*36+36],[j*36+36,i*36+36], 3)
                else:
                    pass
